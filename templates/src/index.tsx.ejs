import { h } from "preact";
import { useState, useEffect } from "preact/hooks";
import { useServer, fetch } from "preact-kit";

export default function Home() {
  const [message, setMessage] = useState("");

  useServer(async () => {
    const res = await fetch("/api/ping");

    if (res.ok) {
      const data = await res.json();
      setMessage(data.message);
    }
  }, []);

  return (
    <div>
      <h1>Hello world!</h1>
      <p>Welcome to <%= appName %> â€” powered by Preact-Kit.</p>
      <p>Ping: {message}</p>
    </div>
  );
}
